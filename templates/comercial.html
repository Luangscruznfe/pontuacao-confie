{% extends 'base.html' %}

{% block title %}Registro Di√°rio - Comercial{% endblock %}

{% block content %}
<h2 class="mb-4">üìà Registro Di√°rio - Comercial</h2>
<form method="POST">
  <div class="mb-3">
    <label for="data" class="form-label">Data:</label>
    <input type="date" class="form-control" id="data" name="data" required>
  </div>

  <div class="mb-3">
    <label for="vendedor" class="form-label">Vendedor:</label>
    <select class="form-select" id="vendedor" name="vendedor" required>
      {% for v in vendedores %}
      <option value="{{ v }}">{{ v }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">A (+2): Meta di√°ria batida/convers√£o 70% <span class="setor-supervisor">(Supervisor)</span></label>
    <input type="number" class="form-control" name="A" value="0">
  </div>

  <div class="mb-3">
    <label class="form-label">B (+1): Cliente novo/Prospec√ß√£o <span class="setor-gerente-comercial">(Gerente Comercial)</span></label>
    <input type="number" class="form-control" name="B" value="0">
  </div>

  <div class="mb-3">
    <label class="form-label">C (-1): Relat√≥rio di√°rio em desacordo ou fora do hor√°rio <span class="setor-rh">(RH)</span></label>
    <input type="number" class="form-control" name="C" value="0" max="0">
  </div>

  <div class="mb-3">
    <label class="form-label">D (-1): Erro de pedido ou cliente insatisfeito <span class="setor-faturamento">(Faturamento)</span></label>
    <input type="number" class="form-control" name="D" value="0" max="0">
  </div>

  <div class="mb-3">
    <label class="form-label">E (-1): Inadimpl√™ncia <span class="setor-financeiro">(Financeiro)</span></label>
    <input type="number" class="form-control" name="E" value="0" max="0">
  </div>

  <div class="form-check mb-1">
    <input class="form-check-input" type="checkbox" name="extras" value="meta" id="meta">
    <label class="form-check-label" for="meta">üìä Positiva√ß√£o e faturamento batido individual (+2)</label>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="extras" value="equipe90" id="equipe90">
    <label class="form-check-label" for="equipe90">ü§ù Equipe chegou a 90% da meta geral (+1)</label>
  </div>

  <div class="mb-3 mt-3">
    <label for="observacao" class="form-label">Observa√ß√£o:</label>
    <textarea class="form-control" id="observacao" name="observacao" rows="3"></textarea>
  </div>

  <button type="submit" class="btn btn-success">Salvar</button>
  <a href="/" class="btn btn-secondary">Voltar</a>
</form>

<script>
  document.querySelector('form').addEventListener('submit', function(e) {
    const vendedor = document.querySelector('select[name="vendedor"]').value;
    const equipe90 = document.querySelector('input[name="extras"][value="equipe90"]');
    if (equipe90.checked && vendedor !== "EQUIPE") {
      alert("‚ùå Para marcar o extra 'Equipe chegou a 90% da meta geral', selecione o vendedor 'EQUIPE'.");
      e.preventDefault();
    }
  });
</script>

<style>
  .setor-gerente { color: #b58900; font-weight: bold; }
  .setor-rh { color: #6c5ce7; font-weight: bold; }
  .setor-financeiro { color: #e74c3c; font-weight: bold; }
  .setor-faturamento { color: #2ecc71; font-weight: bold; }
  .setor-supervisor { color: deepskyblue; font-weight: bold; }
  .setor-gerente-comercial { color: #bdc3c7; font-weight: bold; } /* prata */
</style>
{% endblock %}
