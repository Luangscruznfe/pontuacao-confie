{% extends 'base.html' %}

{% block title %}Registro - Loja{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">🛒 Registro de Pontuação - Loja</h2>

    <form method="POST">
  <div class="mb-3">
    <label for="data" class="form-label">Data:</label>
    <input type="date" class="form-control" name="data" id="data" required>
  </div>

  <div class="mb-3">
    <label for="datas" class="form-label">Múltiplas datas (opcional):</label>
    <textarea class="form-control" name="datas" id="datas" rows="2"
      placeholder="AAAA-MM-DD, AAAA-MM-DD, AAAA-MM-DD"></textarea>
    <small class="text-muted">Se preencher aqui, o campo “Data” acima será ignorado.</small>
  </div>


        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="criterios" value="A" id="A">
            <label class="form-check-label" for="A"><span class="text-warning">Ger. ADM</span><br>Organização da loja (+1)</label>
        </div>
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="criterios" value="B" id="B">
            <label class="form-check-label" for="B"><span style="color: #8e44ad;">RH</span><br>Pontualidade (+1)</label>
        </div>
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="criterios" value="C" id="C">
            <label class="form-check-label" for="C"><span style="color: red;">Financeiro</span><br>Fechamento do caixa (+1)</label>
        </div>
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="criterios" value="D" id="D">
            <label class="form-check-label" for="D"><span style="color: #8e44ad;">RH</span><br>Não postar em rede social (-1)</label>
        </div>
        <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" name="criterios" value="E" id="E">
            <label class="form-check-label" for="E"><span class="text-warning">Ger. ADM</span><br>Validade/Avaria (-2)</label>
        </div>

        <hr>

        <h5>Extras:</h5>
        <div class="form-check mb-1">
            <input class="form-check-input" type="checkbox" name="extras" value="meta" id="meta">
            <label class="form-check-label" for="meta">📈 Meta de faturamento (+2)</label>
        </div>

        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" name="extras" value="equipe90" id="equipe90">
            <label class="form-check-label" for="equipe90">🤝 Equipe chegou a 90% de pontuação (+1)</label>
        </div>

        <div class="mb-3 mt-3">
            <label for="observacao" class="form-label">Observação:</label>
            <textarea class="form-control" name="observacao" rows="2"></textarea>
        </div>

        <button type="submit" class="btn btn-success">Salvar</button>
    </form>
<script>
  // Se "Múltiplas datas" tiver conteúdo, remove o "required" do campo Data
  const inputData = document.getElementById('data');
  const textareaDatas = document.getElementById('datas');

  function toggleRequired() {
    if (textareaDatas.value.trim()) {
      inputData.removeAttribute('required');
    } else {
      inputData.setAttribute('required', 'required');
    }
  }
  textareaDatas.addEventListener('input', toggleRequired);
  toggleRequired();
</script>
</div>
{% endblock %}
